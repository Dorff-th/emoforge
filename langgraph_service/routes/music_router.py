# âœ… routes/music_router.py
from fastapi import APIRouter, HTTPException
from schemas.music_schema import MusicRecommendRequest, MusicRecommendResponse
from services.music_service import recommend_music_simple   # âœ… ë³€ê²½ë¨

router = APIRouter(prefix="/api/langgraph/diary/gpt/music", tags=["Music Recommendation"])


# âœ… FastAPI router
@router.post(
    "/recommendations/simple",
    summary="ê°ì • ê¸°ë°˜ ê°„ë‹¨ ìŒì•… ì¶”ì²œ",
    description="""
ì‚¬ìš©ìì˜ ê°ì • ì ìˆ˜, ê°ì • ë¬¸ì¥, íšŒê³  ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ  
LangGraph + GPT + YouTube Music APIë¥¼ í™œìš©í•´ ìŒì•… ì¶”ì²œì„ ìƒì„±í•©ë‹ˆë‹¤.
""",
    response_model=MusicRecommendResponse,
)
async def recommend_music(request: MusicRecommendRequest):
    print("ğŸ”¥ ë¼ìš°í„° ì§„ì… ì„±ê³µ")
    result = await recommend_music_simple(
        emotionScore=request.emotionScore,
        feelingKo=request.feelingKo,
        diaryContent=request.diaryContent,
        artist_preferences=request.artistPreferences
    )
    print("âœ… ê²°ê³¼ ìƒì„± ì™„ë£Œ")
    return result
